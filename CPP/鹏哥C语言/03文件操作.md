使用文件我们可以将数据直接存放在电脑的硬盘上，做到了数据的持久化。
// 之前写的程序都是将数据放入到内存中，当程序退出时数据就不复存在了。

## 什么是文件
磁盘上的文件是文件
但是在程序设计中，我们一般谈的文件有两种：程序文件、数据文件(从文件功能的角度来分类)

## 程序文件
包括源文件(.c)，目标文件(.obj)，可执行程序(.exe)

## 数据文件
文件的内容不一定是程序，而是程序运行时读写的数据。比如程序运行需要从中读取数据的文件，或者输出内容的文件。

以前输入输出都是以终端为对象的，即从终端的键盘输入数据，运行结果显示到显示器上。
但有时候我们会把信息输出到磁盘上，当需要的时候再从磁盘上吧数据读取到内存中使用，这里处理的就是磁盘上的文件

## 文件名
一个文件要有一个唯一的文件标识，以便用户识别和引用
文件名包含3部分：文件路径 + 文件名主干 + 文件后缀，例如 c:\code\test.txt
为方便起见，文件标识常被称为文件名

文件的打开和关闭
### 文件指针
缓冲文件系统中，关键的概念是 "文件类型指针"，简称 “文件指针”
每个被使用的文件都在内存中开辟了一个相应的文件信息区，用来存放文件的相关信息(如文件的名字，文件的状态以及文件当前的位置等)
这些信息都是保存在一个结构体变量中的。该结构体类型是有系统声明的，取名FILE。
比如 VS2013编译环境提供的 stdio.h 头文件中有以下的文件类型声明
```c
struct _iobuf {
    char*   _ptr;
    int     _cnt;
    char*   _base;
    int     flag;
    int     _file;
    int     _charbuf;
    int     _bufsize;
    char*   _tmpfname;
};
typedef struct _iobuf FILE;
```
不同的编译器 FILE 类型包含的内容不完全相同，但大同小异

每当打开一个文件的时候，系统会给很具文件的情况自动创建一个 FILE 结构的变量，并填充其中的信息，使用者不必关心细节

一般通过一个 FILE 指针(如： FILE* fp;)来维护这个 FILE 结构的变量，这样使用起来更加方便，
定义fp是指向FILE类型数据的指针变量。可以使fp指向某个文件的文件信息区(是一个结构体变量)。通过该文件信息区中的信息能够快速访问该文件
也就是说：**通过文件指针变量能够找到与它关联的文件**



## 文件的打开和关闭
文件在使用之前应该先打开文件，在使用结束之后应该关闭文件。
在打开文件的同时，都会返回一个 FILE* 的指针变量指向该文件，也就相当于建立了指针和文件的关系。

```c++
//打开文件
FILE* fopen(const char* filename, const char* mode);
//关闭文件
int fclose(FILE* stream);
```

文件是一种资源，一个进程(程序)能打开的文件是有限的，一个文件打开而不释放，就可能导致最后的文件无法打开的情况。

## 文件的打开模式
```c++
r 只读
w 只写
a 追加
b 二进制方式打开
+ 模式增强
打开模式有写，当文件不存在时就会创建文件。如果打开模式没有写模式，当文件不存在时就会报错。
写的时候不带 a 模式，默认将会进行 先将文件清空，再写入数据的 情况。
```

## 文件的顺序读写相关函数
| 功能 | 函数名 | 适用于 |
| :---: | :---: | :---: |
| 字符输入函数 | fgetc | 所有输入流 |
| 字符输出函数 | fputc | 所有输出流 |
| 文本行输入函数 | fgets | 所有输入流 |
| 文本行输出函数 | fputs | 所有输出流 |
| 格式化输入函数 | fscanf | 所有输入流 |
| 格式化输出函数 | fprintf | 所有输出流 |
| 二进制输入 | fread | 文件 |
| 二进制输出 | fwrite | 文件 |


## 流
流是一个高度抽象的概念。
理解流：流是个中间介质，用于向不同的存储写入数据。我们在写入文件时候就是借助的流这一概念（比特鹏哥164集-40：00）
C语言程序只要运行起来，默认打开三个流：
stdin - 标准输入流 - 键盘
stdout - 标准输出流 - 屏幕
strerr - 标准出错流 - 屏幕
这三个流的类型都是 FILE* 的

- 使用 fputc 向屏幕输出数据
`fputc('c', stdout);`

fgets 读一行，最多读取 n 个字节，但是字节的最后一位是 0，所以 fgets 最多读取 n - 1 个字符。
