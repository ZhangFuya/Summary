使用占位符进行多个数据的写入
```c++
void MainWindow::on_pushButton_clicked()
{
    QSqlQuery q;

    q.prepare("insert into student values (?, ?)");

    QVariantList ints;

    ints << 10 << 11 << 12 << 13;

    q.addBindValue(ints);

    QVariantList names;

    // 最后一个是空字符串，应与前面的格式相同
   names << "xiaoming" << "xiaoliang"
            << "xiaogang" << QVariant(QVariant::String);


    q.addBindValue(names);

    if (!q.execBatch()) //进行批处理，如果出错就输出错误

        qDebug() << q.lastError();

  
    //下面输出整张表
    QSqlQuery query;

    query.exec("select * from student");

    while(query.next())
    {
        int id = query.value(0).toInt();

        QString name = query.value(1).toString();

        qDebug() << id << name;
    }

}
```

事务之原子性
```c++
事务可以保证一个复杂的操作的原子性，就是对于一个数据库操作序列，这些操作要么全部做完，要么一条也不做，它是一个不可分割的工作单位。在Qt中，如果底层的数据库引擎支持事务，那么QSqlDriver::hasFeature(QSqlDriver::Transactions)会返回true。可以使用QSqlDatabase::transaction()来启动一个事务，然后编写一些希望在事务中执行的SQL语句，最后调用QSqlDatabase::commit()或者QSqlDatabase::rollback()。当使用事务时必须在创建查询以前就开始事务，例如：

QSqlDatabase::database().transaction();

QSqlQuery query;

query.exec("SELECT id FROM employee WHERE name = 'Torild Halvorsen'");

if (query.next()) {

    int employeeId = query.value(0).toInt();

    query.exec("INSERT INTO project (id, name, ownerid) "

               "VALUES (201, 'Manhattan Project', "

               + QString::number(employeeId) + ')');

}

QSqlDatabase::database().commit();

```